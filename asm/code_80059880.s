# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64

.include "globals.inc"
.include "macros.inc"

MakeHeap:
/* 05A480 80059880 00801021 */  addu  $v0, $a0, $zero
/* 05A484 80059884 AC450000 */  sw    $a1, ($v0)
/* 05A488 80059888 240300A5 */  li    $v1, 165
/* 05A48C 8005988C A0430004 */  sb    $v1, 4($v0)
/* 05A490 80059890 A0400005 */  sb    $zero, 5($v0)
/* 05A494 80059894 AC420008 */  sw    $v0, 8($v0)
/* 05A498 80059898 03E00008 */  jr    $ra
/* 05A49C 8005989C AC42000C */   sw    $v0, 0xc($v0)

Malloc:
/* 05A4A0 800598A0 24A5001F */  addiu $a1, $a1, 0x1f
/* 05A4A4 800598A4 2402FFF0 */  li    $v0, -16
/* 05A4A8 800598A8 00A22824 */  and   $a1, $a1, $v0
/* 05A4AC 800598AC 00803021 */  addu  $a2, $a0, $zero
/* 05A4B0 800598B0 240700A5 */  li    $a3, 165
/* 05A4B4 800598B4 24080001 */  li    $t0, 1
.L800598B8:
/* 05A4B8 800598B8 90C20005 */  lbu   $v0, 5($a2)
/* 05A4BC 800598BC 14400016 */  bnez  $v0, .L80059918
/* 05A4C0 800598C0 00000000 */   nop   
/* 05A4C4 800598C4 8CC30000 */  lw    $v1, ($a2)
/* 05A4C8 800598C8 0065102A */  slt   $v0, $v1, $a1
/* 05A4CC 800598CC 14400012 */  bnez  $v0, .L80059918
/* 05A4D0 800598D0 00651823 */   subu  $v1, $v1, $a1
/* 05A4D4 800598D4 2C620021 */  sltiu $v0, $v1, 0x21
/* 05A4D8 800598D8 5440000D */  bnezl $v0, .L80059910
/* 05A4DC 800598DC A0C80005 */   sb    $t0, 5($a2)
/* 05A4E0 800598E0 00C51021 */  addu  $v0, $a2, $a1
/* 05A4E4 800598E4 AC430000 */  sw    $v1, ($v0)
/* 05A4E8 800598E8 A0470004 */  sb    $a3, 4($v0)
/* 05A4EC 800598EC A0400005 */  sb    $zero, 5($v0)
/* 05A4F0 800598F0 8CC3000C */  lw    $v1, 0xc($a2)
/* 05A4F4 800598F4 AC620008 */  sw    $v0, 8($v1)
/* 05A4F8 800598F8 8CC3000C */  lw    $v1, 0xc($a2)
/* 05A4FC 800598FC AC43000C */  sw    $v1, 0xc($v0)
/* 05A500 80059900 ACC2000C */  sw    $v0, 0xc($a2)
/* 05A504 80059904 AC460008 */  sw    $a2, 8($v0)
/* 05A508 80059908 ACC50000 */  sw    $a1, ($a2)
/* 05A50C 8005990C A0C80005 */  sb    $t0, 5($a2)
.L80059910:
/* 05A510 80059910 08016649 */  j     func_80059924
/* 05A514 80059914 24C20010 */   addiu $v0, $a2, 0x10

.L80059918:
/* 05A518 80059918 8CC6000C */  lw    $a2, 0xc($a2)
/* 05A51C 8005991C 14C4FFE6 */  bne   $a2, $a0, .L800598B8
/* 05A520 80059920 00001021 */   addu  $v0, $zero, $zero
glabel func_80059924
/* 05A524 80059924 03E00008 */  jr    $ra
/* 05A528 80059928 00000000 */   nop   

Free:
/* 05A52C 8005992C 00802821 */  addu  $a1, $a0, $zero
/* 05A530 80059930 10A00028 */  beqz  $a1, .L800599D4
/* 05A534 80059934 240200A5 */   li    $v0, 165
/* 05A538 80059938 90A3FFF4 */  lbu   $v1, -0xc($a1)
/* 05A53C 8005993C 14620025 */  bne   $v1, $v0, .L800599D4
/* 05A540 80059940 24A4FFF0 */   addiu $a0, $a1, -0x10
/* 05A544 80059944 8CA3FFF8 */  lw    $v1, -8($a1)
/* 05A548 80059948 0064102B */  sltu  $v0, $v1, $a0
/* 05A54C 8005994C 1040000F */  beqz  $v0, .L8005998C
/* 05A550 80059950 00000000 */   nop   
/* 05A554 80059954 90620005 */  lbu   $v0, 5($v1)
/* 05A558 80059958 1440000C */  bnez  $v0, .L8005998C
/* 05A55C 8005995C 00000000 */   nop   
/* 05A560 80059960 8CA2FFFC */  lw    $v0, -4($a1)
/* 05A564 80059964 AC430008 */  sw    $v1, 8($v0)
/* 05A568 80059968 8CA3FFF8 */  lw    $v1, -8($a1)
/* 05A56C 8005996C 8CA2FFFC */  lw    $v0, -4($a1)
/* 05A570 80059970 AC62000C */  sw    $v0, 0xc($v1)
/* 05A574 80059974 8CA4FFF8 */  lw    $a0, -8($a1)
/* 05A578 80059978 8C820000 */  lw    $v0, ($a0)
/* 05A57C 8005997C 8CA3FFF0 */  lw    $v1, -0x10($a1)
/* 05A580 80059980 00431021 */  addu  $v0, $v0, $v1
/* 05A584 80059984 AC820000 */  sw    $v0, ($a0)
/* 05A588 80059988 8CA4FFF8 */  lw    $a0, -8($a1)
.L8005998C:
/* 05A58C 8005998C 8C83000C */  lw    $v1, 0xc($a0)
/* 05A590 80059990 0083102B */  sltu  $v0, $a0, $v1
/* 05A594 80059994 5040000F */  beql  $v0, $zero, .L800599D4
/* 05A598 80059998 A0800005 */   sb    $zero, 5($a0)
/* 05A59C 8005999C 90620005 */  lbu   $v0, 5($v1)
/* 05A5A0 800599A0 5440000C */  bnezl $v0, .L800599D4
/* 05A5A4 800599A4 A0800005 */   sb    $zero, 5($a0)
/* 05A5A8 800599A8 8C62000C */  lw    $v0, 0xc($v1)
/* 05A5AC 800599AC AC440008 */  sw    $a0, 8($v0)
/* 05A5B0 800599B0 8C83000C */  lw    $v1, 0xc($a0)
/* 05A5B4 800599B4 8C820000 */  lw    $v0, ($a0)
/* 05A5B8 800599B8 8C630000 */  lw    $v1, ($v1)
/* 05A5BC 800599BC 00431021 */  addu  $v0, $v0, $v1
/* 05A5C0 800599C0 AC820000 */  sw    $v0, ($a0)
/* 05A5C4 800599C4 8C82000C */  lw    $v0, 0xc($a0)
/* 05A5C8 800599C8 8C42000C */  lw    $v0, 0xc($v0)
/* 05A5CC 800599CC AC82000C */  sw    $v0, 0xc($a0)
/* 05A5D0 800599D0 A0800005 */  sb    $zero, 5($a0)
.L800599D4:
/* 05A5D4 800599D4 03E00008 */  jr    $ra
/* 05A5D8 800599D8 00000000 */   nop   

glabel func_800599DC
/* 05A5DC 800599DC 27BDFFE0 */  addiu $sp, $sp, -0x20
/* 05A5E0 800599E0 AFBF001C */  sw    $ra, 0x1c($sp)
/* 05A5E4 800599E4 AFB20018 */  sw    $s2, 0x18($sp)
/* 05A5E8 800599E8 AFB10014 */  sw    $s1, 0x14($sp)
/* 05A5EC 800599EC AFB00010 */  sw    $s0, 0x10($sp)
/* 05A5F0 800599F0 00A08021 */  addu  $s0, $a1, $zero
/* 05A5F4 800599F4 00C02821 */  addu  $a1, $a2, $zero
/* 05A5F8 800599F8 24A7001F */  addiu $a3, $a1, 0x1f
/* 05A5FC 800599FC 2402FFF0 */  li    $v0, -16
/* 05A600 80059A00 00E23824 */  and   $a3, $a3, $v0
/* 05A604 80059A04 8E03FFF0 */  lw    $v1, -0x10($s0)
/* 05A608 80059A08 0067102A */  slt   $v0, $v1, $a3
/* 05A60C 80059A0C 14400013 */  bnez  $v0, .L80059A5C
/* 05A610 80059A10 2612FFF0 */   addiu $s2, $s0, -0x10
/* 05A614 80059A14 00671823 */  subu  $v1, $v1, $a3
/* 05A618 80059A18 2C620021 */  sltiu $v0, $v1, 0x21
/* 05A61C 80059A1C 5440001B */  bnezl $v0, .L80059A8C
/* 05A620 80059A20 26420010 */   addiu $v0, $s2, 0x10
/* 05A624 80059A24 02471021 */  addu  $v0, $s2, $a3
/* 05A628 80059A28 AC430000 */  sw    $v1, ($v0)
/* 05A62C 80059A2C 240300A5 */  li    $v1, 165
/* 05A630 80059A30 A0430004 */  sb    $v1, 4($v0)
/* 05A634 80059A34 A0400005 */  sb    $zero, 5($v0)
/* 05A638 80059A38 8E03FFFC */  lw    $v1, -4($s0)
/* 05A63C 80059A3C AC620008 */  sw    $v0, 8($v1)
/* 05A640 80059A40 8E03FFFC */  lw    $v1, -4($s0)
/* 05A644 80059A44 AC43000C */  sw    $v1, 0xc($v0)
/* 05A648 80059A48 AE02FFFC */  sw    $v0, -4($s0)
/* 05A64C 80059A4C AC520008 */  sw    $s2, 8($v0)
/* 05A650 80059A50 AE07FFF0 */  sw    $a3, -0x10($s0)
/* 05A654 80059A54 080166A3 */  j     func_80059A8C
/* 05A658 80059A58 26420010 */   addiu $v0, $s2, 0x10

.L80059A5C:
/* 05A65C 80059A5C 0C016628 */  jal   Malloc
/* 05A660 80059A60 00000000 */   nop   
/* 05A664 80059A64 00408821 */  addu  $s1, $v0, $zero
/* 05A668 80059A68 12200007 */  beqz  $s1, .L80059A88
/* 05A66C 80059A6C 02202821 */   addu  $a1, $s1, $zero
/* 05A670 80059A70 8E460000 */  lw    $a2, ($s2)
/* 05A674 80059A74 02002021 */  addu  $a0, $s0, $zero
/* 05A678 80059A78 0C023010 */  jal   bcopy
/* 05A67C 80059A7C 24C6FFF0 */   addiu $a2, $a2, -0x10
/* 05A680 80059A80 0C01664B */  jal   Free
/* 05A684 80059A84 02002021 */   addu  $a0, $s0, $zero
.L80059A88:
/* 05A688 80059A88 02201021 */  addu  $v0, $s1, $zero
glabel func_80059A8C
.L80059A8C:
/* 05A68C 80059A8C 8FBF001C */  lw    $ra, 0x1c($sp)
/* 05A690 80059A90 8FB20018 */  lw    $s2, 0x18($sp)
/* 05A694 80059A94 8FB10014 */  lw    $s1, 0x14($sp)
/* 05A698 80059A98 8FB00010 */  lw    $s0, 0x10($sp)
/* 05A69C 80059A9C 03E00008 */  jr    $ra
/* 05A6A0 80059AA0 27BD0020 */   addiu $sp, $sp, 0x20

glabel func_80059AA4
/* 05A6A4 80059AA4 00801821 */  addu  $v1, $a0, $zero
/* 05A6A8 80059AA8 00002821 */  addu  $a1, $zero, $zero
/* 05A6AC 80059AAC 24060001 */  li    $a2, 1
.L80059AB0:
/* 05A6B0 80059AB0 90620005 */  lbu   $v0, 5($v1)
/* 05A6B4 80059AB4 14460003 */  bne   $v0, $a2, .L80059AC4
/* 05A6B8 80059AB8 00000000 */   nop   
/* 05A6BC 80059ABC 8C620000 */  lw    $v0, ($v1)
/* 05A6C0 80059AC0 00A22821 */  addu  $a1, $a1, $v0
.L80059AC4:
/* 05A6C4 80059AC4 8C63000C */  lw    $v1, 0xc($v1)
/* 05A6C8 80059AC8 1464FFF9 */  bne   $v1, $a0, .L80059AB0
/* 05A6CC 80059ACC 00000000 */   nop   
/* 05A6D0 80059AD0 03E00008 */  jr    $ra
/* 05A6D4 80059AD4 00A01021 */   addu  $v0, $a1, $zero

glabel func_80059AD8
/* 05A6D8 80059AD8 00801821 */  addu  $v1, $a0, $zero
/* 05A6DC 80059ADC 00002821 */  addu  $a1, $zero, $zero
.L80059AE0:
/* 05A6E0 80059AE0 90620005 */  lbu   $v0, 5($v1)
/* 05A6E4 80059AE4 38420001 */  xori  $v0, $v0, 1
/* 05A6E8 80059AE8 2C420001 */  sltiu $v0, $v0, 1
/* 05A6EC 80059AEC 8C63000C */  lw    $v1, 0xc($v1)
/* 05A6F0 80059AF0 1464FFFB */  bne   $v1, $a0, .L80059AE0
/* 05A6F4 80059AF4 00A22821 */   addu  $a1, $a1, $v0
/* 05A6F8 80059AF8 03E00008 */  jr    $ra
/* 05A6FC 80059AFC 00A01021 */   addu  $v0, $a1, $zero

Ensure16:
/* 05A700 80059B00 2484001F */  addiu $a0, $a0, 0x1f
/* 05A704 80059B04 2402FFF0 */  li    $v0, -16
/* 05A708 80059B08 03E00008 */  jr    $ra
/* 05A70C 80059B0C 00821024 */   and   $v0, $a0, $v0